---
// Password-protected photo gallery
 const photos = [
              { src: '/images/photo-1.jpg', alt: 'Our moment together 1' },
              { src: '/images/photo-2.jpg', alt: 'Our moment together 2' },
              { src: '/images/photo-3.jpg', alt: 'Our moment together 3' },
              { src: '/images/photo-4.jpg', alt: 'Our moment together 4' },
              { src: '/images/photo-5.jpg', alt: 'Our moment together 5' },
              { src: '/images/photo-6.jpg', alt: 'Our moment together 6' },
              { src: '/images/photo-7.jpg', alt: 'Our moment together 7' },
              { src: '/images/photo-8.jpg', alt: 'Our moment together 8' },
              { src: '/images/photo-9.jpg', alt: 'Our moment together 9' },
              { src: '/images/photo-10.png', alt: 'Our moment together 10' },
              { src: '/images/photo-11.jpg', alt: 'Our moment together 11' },
              { src: '/images/photo-12.jpg', alt: 'Our moment together 12' }
            ];
---

<section class="my-12 opacity-0 animate-on-scroll">
  <h2 class="text-2xl font-semibold text-rose-800 mb-6 text-center">
    Our Journey in Pictures
  </h2>

  <!-- Locked State -->
  <div id="gallery-locked" class="bg-gradient-to-br from-rose-100 to-pink-100 rounded-2xl shadow-xl p-8 text-center">
    <div class="text-6xl mb-4">üîí</div>
    <h3 class="text-xl font-semibold text-rose-700 mb-4">
      Unlock Our Memories
    </h3>
    
    <p class="text-rose-600 text-sm mb-6">
      Answer this question to see our precious moments together...
    </p>
    
    <!-- Question -->
    <div class="bg-white/50 rounded-xl p-6 mb-4 max-w-md mx-auto">
      <p class="text-lg font-medium text-gray-800 mb-4">
        What I want as my Bday gift?
      </p>
      
      <!-- Input Field -->
      <input 
        type="text"
        id="gallery-password"
        placeholder="Type your answer..."
        class="w-full bg-white text-gray-800 px-4 py-3 rounded-lg text-center font-medium focus:outline-none focus:ring-2 focus:ring-rose-400 transition-all shadow-sm"
        autocomplete="off"
      />
    </div>
    
    <!-- Unlock Button -->
    <button 
      id="unlock-gallery-btn"
      class="bg-gradient-to-r from-rose-500 to-pink-500 text-white font-semibold px-8 py-3 rounded-full hover:shadow-lg transition-all transform hover:scale-105"
    >
      üîì Unlock Photos
    </button>
    
    <!-- Error Message -->
    <p id="gallery-error" class="hidden text-rose-600 text-sm mt-4 animate-shake">
      ‚ùå Not quite! Try again...
    </p>
  </div>

  <!-- Unlocked Gallery (Hidden Initially) -->
  <div id="gallery-unlocked" class="hidden">
    <div class="text-center mb-6 bg-gradient-to-r from-rose-500 to-pink-500 text-white py-3 px-6 rounded-full inline-block shadow-lg">
      <span class="text-sm font-medium">‚ú® Unlocked! Our Beautiful Memories üíï</span>
    </div>
    
    <div class="grid grid-cols-2 gap-3">
      {photos.map((photo, i) => (
        <div class="relative aspect-square rounded-lg overflow-hidden shadow-md bg-rose-100 photo-item opacity-0">
          <img 
            src={photo.src}
            alt={photo.alt}
            loading="lazy"
            class="w-full h-full object-cover hover:scale-110 transition-transform duration-500"
            decoding="async"
          />
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-10px); }
    75% { transform: translateX(10px); }
  }

  .animate-shake {
    animation: shake 0.5s ease-in-out;
  }

  @keyframes fadeInPhoto {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  .photo-item {
    animation: fadeInPhoto 0.5s ease-out forwards;
  }

  .photo-item:nth-child(1) { animation-delay: 0.1s; }
  .photo-item:nth-child(2) { animation-delay: 0.2s; }
  .photo-item:nth-child(3) { animation-delay: 0.3s; }
  .photo-item:nth-child(4) { animation-delay: 0.4s; }
  .photo-item:nth-child(5) { animation-delay: 0.5s; }
  .photo-item:nth-child(6) { animation-delay: 0.6s; }
  .photo-item:nth-child(7) { animation-delay: 0.7s; }
  .photo-item:nth-child(8) { animation-delay: 0.8s; }
  .photo-item:nth-child(9) { animation-delay: 0.9s; }
  .photo-item:nth-child(10) { animation-delay: 1s; }
  .photo-item:nth-child(11) { animation-delay: 1.1s; }
  .photo-item:nth-child(12) { animation-delay: 1.2s; }
</style>

<script>
  const galleryPassword = document.getElementById('gallery-password');
  const unlockBtn = document.getElementById('unlock-gallery-btn');
  const lockedGallery = document.getElementById('gallery-locked');
  const unlockedGallery = document.getElementById('gallery-unlocked');
  const errorMsg = document.getElementById('gallery-error');

  // ‚ö†Ô∏è REPLACE THIS WITH THE ACTUAL ANSWER!
  const correctAnswer = "PUT_ANSWER_HERE"; // CHANGE THIS!

  function checkGalleryPassword() {
    const userAnswer = galleryPassword?.value.trim();
    
    if (userAnswer === correctAnswer) {
      // Correct! Unlock gallery
      unlockGallery();
    } else {
      // Wrong answer
      showGalleryError();
      if (galleryPassword) {
        galleryPassword.value = '';
      }
    }
  }

  function showGalleryError() {
    if (errorMsg) {
      errorMsg.classList.remove('hidden');
      errorMsg.classList.add('animate-shake');
      
      setTimeout(() => {
        errorMsg.classList.add('hidden');
        errorMsg.classList.remove('animate-shake');
      }, 3000);
    }
  }

  function unlockGallery() {
    if (lockedGallery && unlockedGallery) {
      // Smooth transition
      lockedGallery.style.opacity = '0';
      lockedGallery.style.transform = 'scale(0.95)';
      lockedGallery.style.transition = 'all 0.5s ease-out';
      
      setTimeout(() => {
        lockedGallery.classList.add('hidden');
        unlockedGallery.classList.remove('hidden');
        
        // Confetti celebration
        createGalleryConfetti();
      }, 500);
    }
  }

  function createGalleryConfetti() {
    const colors = ['#fb7185', '#f43f5e', '#fda4af', '#fecdd3'];
    const container = unlockedGallery?.parentElement;
    
    for (let i = 0; i < 40; i++) {
      const confetti = document.createElement('div');
      confetti.style.position = 'absolute';
      confetti.style.width = '10px';
      confetti.style.height = '10px';
      confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
      confetti.style.left = '50%';
      confetti.style.top = '0';
      confetti.style.borderRadius = '50%';
      confetti.style.pointerEvents = 'none';
      confetti.style.zIndex = '10';
      
      container?.appendChild(confetti);
      
      const angle = (Math.PI * 2 * i) / 40;
      const velocity = 100 + Math.random() * 100;
      const tx = Math.cos(angle) * velocity;
      const ty = Math.sin(angle) * velocity;
      
      confetti.animate([
        { transform: 'translate(0, 0) scale(1)', opacity: 1 },
        { transform: `translate(${tx}px, ${ty}px) scale(0)`, opacity: 0 }
      ], {
        duration: 1000 + Math.random() * 500,
        easing: 'cubic-bezier(0, .9, .57, 1)'
      }).onfinish = () => confetti.remove();
    }
  }

  // Event listeners
  if (unlockBtn) {
    unlockBtn.addEventListener('click', checkGalleryPassword);
  }

  if (galleryPassword) {
    galleryPassword.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        checkGalleryPassword();
      }
    });
  }
</script>
